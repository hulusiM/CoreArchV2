<div id="VehicleSetDebitNullModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-brown">
                <h6 class="modal-title">Aracı Havuza Al</h6>
            </div>
            <div class="modal-body">
                <div id="DebitNullDiv" class="form-group" style="display: none;">
                </div>
                <div id="vehicleDebitSetNull_FormId">
                    <div class="form-group">
                        <label>Zimmetli Teslim Tarihi (*):</label>
                        <input table-param="EndDate" type="date" class="form-control" table-description="Tarih" required>
                    </div>
                    <div class="form-group">
                        <label>Havuza Alınma Nedeni (*):</label>
                        <textarea rows="3" cols="5" table-param="Description" class="form-control" table-description="Havuza alınma nedeni" placeholder="Havuza alınma nedeni giriniz" required></textarea>
                    </div>
                </div>
                <div class="modal-footer" style="margin-top: 0px;">
                    <div class="col-sm-4 col-md-6">
                    </div>
                    <div class="col-sm-4 col-md-3">
                        <button type="button" tabindex="5" class="btn btn-danger full-width" onclick="$('#VehicleSetDebitNullModal').modal('hide')"><i class="fa fa-times"></i> İptal</button>
                    </div>
                    <div class="col-sm-4 col-md-3">
                        <button tabindex="4" type="submit" class="btn btn-primary full-width" onclick="VehicleDebitSetUserNull()"><i class="fa fa-check"></i> Kaydet</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function VehicleDebitSetPoolModal() {
        var vehicleId = $('#vehicle_Id').val();
        if (vehicleId > 0) {
            var model = { vehicleId: vehicleId };
            sendAjxForm(model,
                "/Vehicle/GetByIdVehicleDebit",
                function (e) {
                    if (e != null) {
                        $('#DebitNullDiv').append('<span class="label bg-orange faa-vertical animated">Araç üzerinde zimmetli kullanıcı bulunuyor ! (Zimmetli : ' + e.DebitNameSurname + '</span>');
                        $('#VehicleSetDebitNullModal').modal("show");
                    } else
                        ShowMessage("warning", "Bilgi", "Araç üzerinde aktif zimmetli bulunamadı");

                },
                'GET');
        }
    }

    function VehicleDebitSetUserNull() {
        var vehicleId = $('#vehicle_Id').val();
        if (vehicleId > 0) {
            var model = { vehicleId: vehicleId };
            var model2 = FormGetAllValue('#vehicleDebitSetNull_FormId [table-param]');
            if (model2 != null) {
                var mergeObject = $.extend(model, model2);
                sendAjxForm(mergeObject,
                    "/Vehicle/VehicleDebitSetUserNull",
                    function (e) {
                        if (e.IsSuccess) {
                            FormAllInputsClearNoCloseModal("#vehicleDebitSetNull_FormId [table-param]");
                            $('#VehicleSetDebitNullModal').modal("hide");
                            ShowMessage("success", "Bilgi", "Araç başarıyla havuza alındı");
                            setDebitUser();
                        } else
                            ShowMessage("error", "Bilgi", e.Message);

                    },
                    'POST');
            }
        }
    }
</script>